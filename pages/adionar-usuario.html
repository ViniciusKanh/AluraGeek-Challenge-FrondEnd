<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AluraGeek - Adicionar Usuario</title>
  <link rel="shortcut icon" href="./assets/images/commerce.png" type="image/x-icon">
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/body.css">
  <link rel="stylesheet" href="../assets/css/produtos-similares.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-PfbpFO3T3x7RZi+W1jR1IzV3fMS2+CYp+VBdINyU3WnqYzq5XnmGn2UJpNzjbV3vWkgDhyccS2jT72e3eF4cMg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
  <!-- Nav Search Login -->
  <header>
    <nav class="busca">
      <div class="busca__logo">
        <img src="../assets/images/logo.png" alt="logo azul controle de video game">
        <a href="../index.html"><p class="busca__texto">Alura</p><p>Geek</p></a>
        <input type="text" class="busca__barra" placeholder="O que deseja encontrar?">
      </div>
    </nav>
  </header>
  
  <!-- Login Adiministrador  -->
  <!-- ... -->

  <!-- Login Adiministrador  -->
  <section class="login-admin">
    <div class="form-admin">
      <p>CRIAR USUARIO</p>
      <input type="text" name="nome" id="nomeUser" class="input-nome" placeholder="Apelido">
      <input type="text" name="username" id="UserUsuario" class="input-nome" placeholder="Email">
      <input type="text" name="passwordd" id="passworddUsuario" class="input-nome" placeholder="Digite sua senha">
      <input type="text" name="username2" id="passworddUsuario2" class="input-nome" placeholder="Confirme sua senha">

      <div class="botao-container">
        <button id="addUserButton">Criar Usuario</button>
        <button onclick="voltar()">Voltar</button>
        <button onclick="limparCampos()">Limpar</button>
      </div>

      <div id="mensagem" style="display: none;"></div>
    </div>
  </section>

  <!-- ... -->

  <!-- Contato -->
  <section class="contato">
    <div class="contato-destaque">
      <div class="contato__logo">
        <img src="../assets/images/logo.png" alt="logo azul controle de video game">
        <p class="contato__texto">Alura</p>
        <p>Geek</p>
      </div>
      <div class="contato__links">
        <a href="#">Quem somos nós</a>
        <a href="#">Política de Privacidade</a>
        <a href="#">Programa fidelidade</a>
        <a href="#">Nossas lojas</a>
        <a href="#">Quero ser franqueado</a>
        <a href="E">Anuncie aqui</a>
      </div>
    </div>
    <div class="form">
      <p>Fale conosco</p>
      <form action="" class="contato-form" name="form">
        <input type="text" name="nome" id="nome" class="input-nome" placeholder="Nome">
        <textarea name="mensagem" id="msg" cols="30" rows="10" placeholder="Escreva sua mensagem"></textarea>
        <button type="submit">Enviar mensagem</button>
      </form>
    </div>
  </section>

  <!-- Rodapé -->
  <footer>
    <p>Desenvolvido por Vinicius Santos</p>
    <span>&copy; 2022</span>
  </footer>
  <script src="../js/adicionarUsuario.js"></script>
  <script src="../js/login.js"></script>
  <script>
    function voltar() {
      window.location.href = "./login.html";
    }
  
    function limparCampos() {
      document.getElementById("nomeUser").value = "";
      document.getElementById("UserUsuario").value = "";
      document.getElementById("passworddUsuario").value = "";
      document.getElementById("passworddUsuario2").value = "";
    }
  
    document.getElementById("addUserButton").addEventListener("click", function () {
      var nome = document.getElementById("nomeUser").value;
      var email = document.getElementById("UserUsuario").value;
      var senha = document.getElementById("passworddUsuario").value;
      var senhaConfirmacao = document.getElementById("passworddUsuario2").value;
  
      // Verifica se a senha e a confirmação são iguais
      if (senha !== senhaConfirmacao) {
        alert("A senha e a confirmação de senha não são iguais.");
        return;
      }
  
      // Cria o objeto com os dados do novo usuário
      var novoUsuario = {
        nome: nome,
        email: email,
        senha: senha
      };
  
      // Envia os dados para o servidor
      fetch('http://localhost:3000/usuarios', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(novoUsuario)
      })
        .then(function (response) {
          if (response.ok) {
            alert("Usuário adicionado com sucesso!");
          } else {
            alert("Erro ao adicionar usuário.");
          }
        })
        .catch(function (error) {
          console.error('Erro ao adicionar usuário:', error);
          alert("Erro ao adicionar usuário.");
        });
    });
  </script>
  <script>
    const btnLogin = document.querySelector('[data-login-button]');
    btnLogin.addEventListener('click', () => {
      window.location.href = "./login.html";
    });
  </script>
  
